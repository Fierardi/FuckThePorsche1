<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="Images/Icon.png" type="image/png">
  <title>NapoliGames - Chat</title>
  
  <!-- External Libraries -->
  <script src="https://cdn.ably.io/lib/ably.min-1.js"></script>
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@400;600&display=swap" rel="stylesheet" />
    
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-WGE5P95VRW"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-WGE5P95VRW');
  </script>

  <!-- External Stylesheets -->
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="chat.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="logo">
      <a href="index.html" class="logo-link">NapoliGames</a>
    </div> 
  </header>

  <main>
    <h1>Napoli-Chat</h1>

    <div class="username">
      <div id="user-display"></div>
      <div id="login-prompt" class="login-prompt" style="display: none;">
        <div>Please log in to participate in the chat</div>
        <button class="login-button" onclick="window.netlifyIdentity.open()">Login / Sign Up</button>
      </div>
    </div>

    <div class="chat-layout">
      <div class="sidebar">
        <div class="sidebar-header">
          <div class="chat-tabs">
            <button class="tab-btn active" data-tab="public">Public</button>
            <button class="tab-btn" data-tab="private" id="privateTabBtn">
              Private 
              <span id="privateNotificationBadge" class="tab-notification-badge" style="display: none;">0</span>
            </button>
          </div>
          <div id="userInfoSection" class="user-info-section" style="display: none;">
            <h4>Your Username:</h4>
            <div class="username-display" id="usernameDisplay"></div>
            <small style="color: #666; font-size: 0.75rem;">Share this with friends to connect!</small>
          </div>
          <input type="text" class="user-search" id="userSearch" placeholder="Search users by name..." style="display: none;">
        </div>
        <div class="chat-list" id="chatList">
          <!-- Chat items will be populated here -->
        </div>
      </div>

      <div id="chat-container">
        <div class="chat-header">
          <h3 id="chatTitle">Public Chat</h3>
        </div>
        <div id="chat"></div>
        <div class="typing-indicator" id="typingIndicator">Someone is typing...</div>
        <div class="input-row">
          <input type="file" id="imageInput" class="file-input" accept="image/*">
          <button class="file-button" id="fileBtn" disabled>ðŸ“·</button>
          <div class="input-container">
            <input type="text" id="msg" placeholder="Type a message..." disabled />
            <img id="imagePreview" style="display:none; max-width:120px; max-height:120px; border-radius:10px; margin-top:4px;" />
          </div>
          <button id="send" class="send-btn" disabled>Send</button>
        </div>
      </div>
    </div>
  </main>

  <!-- Image Modal -->
  <div id="imageModal" class="image-modal">
    <div class="image-modal-content">
      <span class="image-modal-close">&times;</span>
      <img id="modalImage" src="" alt="">
    </div>
  </div>

 <!-- Floating Navigation Menu -->
    <div class="menu">
      <a href="index.html" class="link">
        <span class="link-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2026 Fonticons, Inc.--><path d="M240 6.1c9.1-8.2 22.9-8.2 32 0l232 208c9.9 8.8 10.7 24 1.8 33.9s-24 10.7-33.9 1.8l-8-7.2 0 205.3c0 35.3-28.7 64-64 64l-288 0c-35.3 0-64-28.7-64-64l0-205.3-8 7.2c-9.9 8.8-25 8-33.9-1.8s-8-25 1.8-33.9L240 6.1zm16 50.1L96 199.7 96 448c0 8.8 7.2 16 16 16l48 0 0-104c0-39.8 32.2-72 72-72l48 0c39.8 0 72 32.2 72 72l0 104 48 0c8.8 0 16-7.2 16-16l0-248.3-160-143.4zM208 464l96 0 0-104c0-13.3-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24l0 104z"/></svg>
            <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
          </svg>
        </span>
        <span class="link-title">Home</span>
      </a>

      <a href="games.html" class="link">
        <span class="link-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2026 Fonticons, Inc.--><path d="M464 256a208 208 0 1 0 -416 0 208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0 256 256 0 1 1 -512 0zm306.7 69.1L162.4 380.6c-19.4 7.5-38.5-11.6-31-31l55.5-144.3c3.3-8.5 9.9-15.1 18.4-18.4l144.3-55.5c19.4-7.5 38.5 11.6 31 31L325.1 306.7c-3.3 8.5-9.9 15.1-18.4 18.4zM288 256a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"/></svg>
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 012-2h10a2 2 0 012 2v14a2 2 0 01-2 2H7a2 2 0 01-2-2V5z" />
          </svg>
        </span>
        <span class="link-title">Games</span>
      </a>

      <a href="chat.html" class="link">
        <span class="link-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2026 Fonticons, Inc.--><path d="M203.7 512.9s0 0 0 0l-37.8 26.7c-7.3 5.2-16.9 5.8-24.9 1.7S128 529 128 520l0-72-32 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l320 0c53 0 96 43 96 96l0 224c0 53-43 96-96 96l-120.4 0-91.9 64.9zm64.3-104.1c8.1-5.7 17.8-8.8 27.7-8.8L416 400c26.5 0 48-21.5 48-48l0-224c0-26.5-21.5-48-48-48L96 80c-26.5 0-48 21.5-48 48l0 224c0 26.5 21.5 48 48 48l56 0c10.4 0 19.3 6.6 22.6 15.9 .9 2.5 1.4 5.2 1.4 8.1l0 49.7c32.7-23.1 63.3-44.7 91.9-64.9z"/></svg>
            <path stroke-linecap="round" stroke-linejoin="round" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
          </svg>
        </span>
        <span class="link-title">Chat</span>
      </a>

      <a href="updates.html" class="link">
        <span class="link-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2026 Fonticons, Inc.--><path d="M168 80c-13.3 0-24 10.7-24 24l0 304c0 8.4-1.4 16.5-4.1 24L440 432c13.3 0 24-10.7 24-24l0-304c0-13.3-10.7-24-24-24L168 80zM72 480c-39.8 0-72-32.2-72-72L0 112C0 98.7 10.7 88 24 88s24 10.7 24 24l0 296c0 13.3 10.7 24 24 24s24-10.7 24-24l0-304c0-39.8 32.2-72 72-72l272 0c39.8 0 72 32.2 72 72l0 304c0 39.8-32.2 72-72 72L72 480zM192 152c0-13.3 10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 48c0 13.3-10.7 24-24 24l-48 0c-13.3 0-24-10.7-24-24l0-48zm152 24l48 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-48 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zM216 256l176 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-176 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 80l176 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-176 0c-13.3 0-24-10.7-24-24s10.7-24 24-24z"/></svg>
            <path stroke-linecap="round" stroke-linejoin="round" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
          </svg>
        </span>
        <span class="link-title">Updates</span>
      </a>

      <a href="#" class="link" onclick="toggleSearch()">
        <span class="link-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2026 Fonticons, Inc.--><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376C296.3 401.1 253.9 416 208 416 93.1 416 0 322.9 0 208S93.1 0 208 0 416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"/></svg>
            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
        </span>
        <span class="link-title">Search</span>
      </a>

      <a href="#" class="link" id="dock-account-btn">
        <span class="link-icon">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
          </svg>
        </span>
        <span class="link-title">Account</span>
      </a>
    </div>

  <!-- Footer -->
  <footer>
    <div class="footer-links">
      <a href="#">Privacy Policy</a>
      <a href="#">Terms of Service</a>
      <a href="#">Contact Us</a>
      <a href="#">About</a>
    </div>
    <p>Copyright &copy; 2025 NapoliGames. All rights reserved.</p>
  </footer>

  <!-- External JavaScript -->
  <script src="chat.js"></script>
  <script src="main.js"></script>
</body>
</html>